<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ServiceCallout async="false" continueOnError="false" enabled="true" name="cf_cortexTargetCalloutWithZoom">
    <Request variable="cortexRequest">
        <Set>
            <Headers>
                <Header name="Content-Type">application/json</Header>
                <Header name="x-ep-credit-level">{api.request.creditLevel}</Header>
                <Header name="Authorization">{request.header.Authorization}</Header>
            </Headers>
            <QueryParams>
                <QueryParam name="zoom">{api.ep.getCart.Zoom}</QueryParam>
            </QueryParams>
            <Path>{ep.request.path}</Path>
            <Verb>{ep.request.verb}</Verb>
            <Payload contentType="application/json">{ep.request.content}</Payload>
        </Set>
    </Request>
    <HTTPTargetConnection>
        <Properties>
            <Property name="target.copy.pathsuffix">false</Property>
            <Property name="target.copy.queryparams">false</Property>
            <Property name="keepalive.timeout.millis">360000</Property>
            <Property name="connect.timeout.millis">3600</Property>
        </Properties>
        <LoadBalancer>
            <Server name="TMNG_ElasticPath_CortexTarget">
                <IsEnabled>true</IsEnabled>
            </Server>
        </LoadBalancer>
    </HTTPTargetConnection>
    <Response>ep.response</Response>
</ServiceCallout>